# shell编程初步

- 编程语言的分类：
    - 根据运行方式
        - 编译运行：源代码 --> 编译器（编译） --> 程序文件：C语言
        - 解释运行：源代码 --> 运行时启动解释器，由解释器边解释边运行
    - 根据编程过程中，功能实现是调用库还是调用外部的程序文件：
        - 非完整编程语言：shell脚本编程，利用os上的命令以及编程组件进行编程
        - 完整编程语言：其利用库或编程组建进行编程
    - 根据编程模型：
        - 面向过程编程语言：以指令为中心来组织代码，数据是服务于代码的
            - 三种执行逻辑：顺序执行、选择执行、循环执行
        - 面向对象编程语言：以数据为中心来组织代码，指令是服务于数据的
            - 对象为某种数据类型或者数据模式，实例化对象

- shell脚本编程：过程式，解释运行，依赖于外部程序文件运行
    - 如何写：第一行：给出shebang，解释其路径，用于解释执行当前甲苯的解释器程序文件
        - 常见解释器：
            - `#!/bin/bash`
            - `#!/bin/python`
        - 命令的堆积，需要用程序逻辑来判断，运行条件、环境是否满足，以避免运行中发生错误。
    - 文本编辑器：nano
        - 行编辑器：sed
        - 全屏幕编程器：nano，vi，vim
    - 运行shell脚本：
        - 赋予脚本执行权限，并直接执行脚本：`chmod u+x /path/shell_file; /pash/shell_file`
        - 解释型运行脚本：`bash /path/shell_file`
        - shell脚本的运行是通过子shell运行的

# 变量

- 变量名：指向内存空间
- 变量类型：存储格式，表示数据的范围，参与的运算
- shell为弱类型的变量：把所有变量统统视作字符型，bash变量不需要实现声明
- 变量名的规则：由字母，下划线，数字组成，不能以数字开头，不能使用程序的保留字
- bash的变量类型：本地变量、环境变量、局部变量、位置参数、特殊变量：
    - **本地变量**：作用域为当前shell进程
        - 赋值： `name=value`
        - 引用：`${var_name}`，`$var_name`
            - `""`：变量名会替换为其值
            - `''`：变量名不会替换为其值
        - 查看变量：`set`命令
        - 撤销变量：`unset name`，不能使用$
    - **环境变量**：作用域为当前shell及其子shell
        - 赋值：
            - `export name=value`
            - `name=value; export name`
            - `declear -x name=value`
            - `name=value; declear -x name`
        - 引用：`${name}`，`$name`
        - bash内嵌了很多环境变量，（通常为全大写字母），用于定义bash的工作环境：PATH, HISTFILE, HISTSIZE, HISTFILESIZE, HISTCONTROL, SHELL, HOME, UID, PWD, OLDPWD...
        - 查看环境变量：`export`，`declear -x`，`env`，`printenv`
        - 撤销环境变量：`unset name`，不能使用$
    - **只读变量**：
      - 声明：
          - `declear -r name`
          - `readonly name`
      - 无法重新赋值，并且不支持撤销；存活时间为当前shell进程的生命周期，随shell终止而终止
    - **局部变量**：作用域为某代码片段（函数上下文）
    - **位置参数**：执行脚本的shell进程传递的参数
    - **特殊变量**：shell内置的有特殊功用的变量
      - $?：上以命令的执行结果：0：成功；1-255：失败

# 逻辑运算

- 运算数：
    - 真：true, yes, on, 1
    - 假：false, no, off, 0
- 逻辑运算：
    - 与（&&），或（||），非（!）
    - 异或：判断是否不同，相同为，不同为1
- 命令执行结果：执行成功为0，不成功为1
- 短路法则：
    - 与运算：`COMMAND1 && COMMAND2`，COMMAND1如果没有执行成功，则COMMAND2不会执行；
    - 或运算：`COMMAND1 || COMMAND2`，COMMAND1如果执行没有成功，则执行COMMAND2，如：`id user1 || useradd user1`


    - **#** 为注释

# bash脚本编程的算数运算

- 算数运算有：`+`、`-`、`*`、/、`**`（次方）、`%`（取模）
- let VAR=算数运算表达式：`let sum=$num1+$num2`
- VAR=$[算数运算表达式]：`$[$num3+$num4]`
- VAR=$((算数运算表达式))：`$(($num3+$num4))`
- `sum=$(expr $num2 + $num4)`
- 乘法符号`*`，有些时候需要转义
